<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/admin-layout.html}">

<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω h√≥a ƒë∆°n</title>
    <style>
        .status-badge {
            padding: 0.4em 0.6em;
            border-radius: 0.375rem; /* TƒÉng border-radius cho hi·ªáu ·ª©ng pill */
            font-weight: 600;
            font-size: 0.75rem;
            display: inline-block;
            text-align: center;
        }
        .status-CHO_XAC_NHAN {
            background-color: #ffc107; /* M√†u v√†ng - warning */
            color: #212529;
        }
        .status-CHO_LAY_HANG {
            background-color: #6c757d; /* M√†u x√°m - secondary */
            color: #fff;
        }
        .status-CHO_GIAO_HANG {
            background-color: #007bff; /* M√†u xanh d∆∞∆°ng - primary */
            color: #fff;
        }
        .status-HOAN_THANH {
            background-color: #28a745; /* M√†u xanh l√° - success */
            color: #fff;
        }
        .status-HUY {
            background-color: #dc3545; /* M√†u ƒë·ªè - danger */
            color: #fff;
        }
        .status-TRA_HANG {
            background-color: #343a40; /* M√†u ƒëen - dark */
            color: #fff;
        }
        .action-icon {
            margin-right: 5px;
            transition: color 0.2s;
        }
        .action-icon:hover {
            opacity: 0.8;
            cursor: pointer;
        }
        .sort-link {
            text-decoration: none;
            color: #6c757d;
            margin-left: 2px;
        }
        .sort-link:hover {
            color: #007bff;
        }
        .table th, .table td {
            vertical-align: middle;
        }
    </style>
</head>

<body>
<div layout:fragment="content">
    <input type="hidden" id="pageValue" th:value="${items.number}"/>
    <input type="hidden" id="sortValue" th:value="${sortField + ',' + sortDirection}"/>
    <input type="hidden" id="ngayTaoStartValue" th:value="${ngayTaoStart}"/>
    <input type="hidden" id="ngayTaoEndValue" th:value="${ngayTaoEnd}"/>
    <input type="hidden" id="maDinhDanhValue" th:value="${maDinhDanh}"/>
    <input type="hidden" id="trangThaiValue" th:value="${trangThai}"/>
    <input type="hidden" id="loaiDonValue" th:value="${loaiDon}"/>
    <input type="hidden" id="hoVaTenValue" th:value="${hoVaTen}"/>
    <input type="hidden" id="soDienThoaiValue" th:value="${soDienThoai}"/>

    <h4 class="mb-4">üìã Qu·∫£n l√Ω h√≥a ƒë∆°n</h4>

    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h5 class="card-title text-primary"><i class="fa fa-filter me-2"></i> B·ªô l·ªçc t√¨m ki·∫øm</h5>
            <form th:action="@{/admin/bill-list}" method="GET" id="form-search">
                <div class="row">
                    <div class="form-group col-md-3">
                        <label for="maDinhDanh" class="form-label">M√£ h√≥a ƒë∆°n</label>
                        <input type="text" class="form-control" id="maDinhDanh" name="maDinhDanh" placeholder="M√£ h√≥a ƒë∆°n" th:value="${maDinhDanh}">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="trangThai" class="form-label">Tr·∫°ng th√°i</label>
                        <select class="form-select" id="trangThai" name="trangThai">
                            <option value="">-- T·∫•t c·∫£ --</option>
                            <option value="CHO_XAC_NHAN" th:selected="${trangThai == 'CHO_XAC_NHAN'}">Ch·ªù x√°c nh·∫≠n</option>
                            <option value="CHO_LAY_HANG" th:selected="${trangThai == 'CHO_LAY_HANG'}">Ch·ªù l·∫•y h√†ng</option>
                            <option value="CHO_GIAO_HANG" th:selected="${trangThai == 'CHO_GIAO_HANG'}">Ch·ªù giao h√†ng</option>
                            <option value="HOAN_THANH" th:selected="${trangThai == 'HOAN_THANH'}">Ho√†n th√†nh</option>
                            <option value="HUY" th:selected="${trangThai == 'HUY'}">H·ªßy</option>
                            <option value="TRA_HANG" th:selected="${trangThai == 'TRA_HANG'}">Tr·∫£ h√†ng</option>
                        </select>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="loaiDon" class="form-label">Lo·∫°i ƒë∆°n</label>
                        <select class="form-select" id="loaiDon" name="loaiDon">
                            <option value="">-- T·∫•t c·∫£ --</option>
                            <option value="OFFLINE" th:selected="${loaiDon == 'OFFLINE'}">T·∫°i qu·∫ßy</option>
                            <option value="ONLINE" th:selected="${loaiDon == 'ONLINE'}">Tr·ª±c tuy·∫øn</option>
                        </select>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="hoVaTen" class="form-label">T√™n kh√°ch h√†ng</label>
                        <input type="text" class="form-control" id="hoVaTen" name="hoVaTen" placeholder="H·ªç v√† t√™n" th:value="${hoVaTen}">
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="form-group col-md-3">
                        <label for="ngayTaoStart" class="form-label">Ng√†y t·∫°o (T·ª´)</label>
                        <input type="date" class="form-control" id="ngayTaoStart" name="ngayTaoStart" th:value="${ngayTaoStart}">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="ngayTaoEnd" class="form-label">Ng√†y t·∫°o (ƒê·∫øn)</label>
                        <input type="date" class="form-control" id="ngayTaoEnd" name="ngayTaoEnd" th:value="${ngayTaoEnd}">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="soDienThoai" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="text" class="form-control" id="soDienThoai" name="soDienThoai" placeholder="S·ªë ƒëi·ªán tho·∫°i" th:value="${soDienThoai}">
                    </div>
                    <div class="form-group col-md-3 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary me-2 w-100"><i class="fa fa-search"></i> T√¨m ki·∫øm</button>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 d-flex justify-content-end">
                        <a th:href="@{/admin/bill-list}" class="btn btn-secondary me-2"><i class="fa fa-sync-alt"></i> ƒê·∫∑t l·∫°i</a>
                        <a href="#" onclick="exportToExcel()">
                            <button type="button" class="btn btn-success"><i class="far fa-file-excel"></i> Export Excel</button>
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="alert alert-success" role="alert" th:if="${message}">
        <span th:text="${message}"></span>
    </div>

    <table class="table table-hover border my-3 table-sm" style="font-size: 0.8rem" id="billTable">
        <thead class="bg-dark text-white">
        <tr>
            <th scope="col" class="text-center">M√£ h√≥a ƒë∆°n
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'code' && sortDirection == 'asc' ? 'code,desc' : 'code,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'code' && sortDirection == 'desc' ? 'code,asc' : 'code,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üì</a>
            </th>
            <th scope="col" class="text-center">M√£ ƒë·ªïi tr·∫£</th>
            <th scope="col">H·ªç v√† t√™n
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'hoVaTen' && sortDirection == 'asc' ? 'hoVaTen,desc' : 'hoVaTen,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'hoVaTen' && sortDirection == 'desc' ? 'hoVaTen,asc' : 'hoVaTen,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üì</a>
            </th>
            <th scope="col">SƒêT</th>
            <th scope="col" class="text-center">Ng√†y ƒë·∫∑t
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'ngayTao' && sortDirection == 'asc' ? 'ngayTao,desc' : 'ngayTao,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'ngayTao' && sortDirection == 'desc' ? 'ngayTao,asc' : 'ngayTao,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üì</a>
            </th>
            <th scope="col" class="text-end">T·ªïng ti·ªÅn
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'tongTien' && sortDirection == 'asc' ? 'tongTien,desc' : 'tongTien,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'tongTien' && sortDirection == 'desc' ? 'tongTien,asc' : 'tongTien,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link text-white">‚Üì</a>
            </th>
            <th scope="col" class="text-center">Lo·∫°i ƒë∆°n</th>
            <th scope="col" class="text-center">H√¨nh th·ª©c TT</th>
            <th scope="col" class="text-center">Tr·∫°ng th√°i</th>
            <th scope="col" class="text-center">Thao t√°c</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="item:${items}" class="clickable-row">
            <td class="text-center">
                <a th:href="@{'/admin/getbill-detail/' + ${item.maHoaDon}}" class="text-primary fw-bold" th:text="${item.maDinhDanh}">HD09347</a>
            </td>
            <td class="text-center">
                <a th:if="${item.maDoiTra != null and item.maDoiTra.trim() != ''}" class="text-danger fw-bold" th:href="@{'/admin-only/bill-return-detail-code/' + ${item.maDoiTra} }" th:text="${item.maDoiTra}"></a>
                <span th:unless="${item.maDoiTra != null and item.maDoiTra.trim() != ''}">---</span>
            </td>
            <td th:text="${item.hoVaTen}">Mark</td>
            <td th:text="${item.soDienThoai}">03843234</td>
            <td class="text-center" th:text="${item.ngayTao != null ? #temporals.format(item.ngayTao, 'dd-MM HH:mm') : ''}">03843234</td>
            <td class="text-end fw-bold" th:text="${#numbers.formatDecimal(item.tongTien, 0, 'POINT', 0, 'COMMA')} + '‚Ç´'"></td>
            <td class="text-center">
                <span th:if="${item.loaiDon == T(com.example.DATN2025.entity.enumClass.InvoiceType).OFFLINE}" class="badge bg-secondary">T·∫°i qu·∫ßy</span>
                <span th:if="${item.loaiDon == T(com.example.DATN2025.entity.enumClass.InvoiceType).ONLINE}" class="badge bg-info">Online</span>
            </td>
            <td class="text-center">
    <span th:if="${item.hinhThucThanhToan == 'THE'}" class="text-warning" data-toggle="tooltip" title="Th·∫ª">
        <i class="fas fa-credit-card fa-lg"></i>
    </span>
                <span th:if="${item.hinhThucThanhToan == 'CHUYEN_KHOAN'}" class="text-info" data-toggle="tooltip" title="Chuy·ªÉn kho·∫£n">
        <i class="fas fa-university fa-lg"></i>
    </span>
                <span th:if="${item.hinhThucThanhToan == 'TIEN_MAT'}" class="text-success" data-toggle="tooltip" title="Ti·ªÅn m·∫∑t">
        <i class="fas fa-money-bill-wave fa-lg"></i>
    </span>
            </td>
            <td class="text-center">
                <span class="status-badge status-CHO_XAC_NHAN" th:if="${item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).CHO_XAC_NHAN}">Ch·ªù x√°c nh·∫≠n</span>
                <span class="status-badge status-CHO_LAY_HANG" th:if="${item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).CHO_LAY_HANG}">Ch·ªù l·∫•y h√†ng</span>
                <span class="status-badge status-CHO_GIAO_HANG" th:if="${item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).CHO_GIAO_HANG}">Ch·ªù giao h√†ng</span>
                <span class="status-badge status-HOAN_THANH" th:if="${item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).HOAN_THANH}">Ho√†n th√†nh</span>
                <span class="status-badge status-TRA_HANG" th:if="${item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).TRA_HANG}">ƒê·ªïi tr·∫£</span>
                <span class="status-badge status-HUY" th:if="${item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).HUY}">ƒê√£ h·ªßy</span>
            </td>

            <td class="text-center">
                <div class="d-flex justify-content-center align-items-center">
                    <a th:href="@{'/admin/bill-print/' + ${item.maHoaDon}}"
                       target="_blank" class="action-icon text-info"
                       data-toggle="tooltip" data-placement="top" title="In h√≥a ƒë∆°n">
                        <i class="fa fa-print fa-lg"></i>
                    </a>

                    <span type="button"
                          th:if="${item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).CHO_XAC_NHAN || item.trangThai == T(com.example.DATN2025.entity.enumClass.BillStatus).CHO_LAY_HANG}"
                          class="cancel-btn action-icon text-danger"
                          data-toggle="tooltip" data-placement="top" title="H·ªßy ƒë∆°n"
                          th:data-mahoadon="${item.maHoaDon}"
                          data-next-status="HUY">
                        <i class="fa fa-times-circle fa-lg"></i>
                    </span>

                    <span type="button"
                          th:if="${item.trangThai != T(com.example.DATN2025.entity.enumClass.BillStatus).HOAN_THANH && item.trangThai != T(com.example.DATN2025.entity.enumClass.BillStatus).HUY && item.trangThai != T(com.example.DATN2025.entity.enumClass.BillStatus).TRA_HANG}"
                          class="btn-update-status action-icon text-success"
                          data-toggle="tooltip" data-placement="top"
                          th:data-current-status="${item.trangThai}"
                          th:data-mahoadon="${item.maHoaDon}"
                          title="Chuy·ªÉn tr·∫°ng th√°i ti·∫øp theo">
                        <i class="fa fa-arrow-circle-right fa-lg"></i>
                    </span>
                </div>
            </td>
        </tr>
        <tr th:if="${items.content.empty}">
            <td colspan="10" class="text-center text-muted">Kh√¥ng t√¨m th·∫•y h√≥a ƒë∆°n n√†o ph√π h·ª£p.</td>
        </tr>
        </tbody>
    </table>
    <div class="clearfix float-end">
        <ul class="pagination pagination-sm">
            <li th:classappend="${items.hasPrevious() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=0, sort=${sortValue}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-double-left"></i>
                </a>
            </li>
            <li th:classappend="${items.hasPrevious() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=${items.number - 1}, sort=${sortValue}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-left"></i>
                </a>
            </li>

            <li class="page-item active">
                <a class="page-link" href="#" th:text="${items.number + 1}">1</a>
            </li>

            <li th:classappend="${items.hasNext() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=${items.number + 1}, sort=${sortValue}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-right"></i>
                </a>
            </li>
            <li th:classappend="${items.hasNext() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=${items.totalPages - 1},sort=${sortValue}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-double-right"></i>
                </a>
            </li>
        </ul>
    </div>
    <form th:action="@{/admin/update-bill-status-direct}" method="get" id="updateStatusForm" style="display: none;">
        <input type="hidden" name="maHoaDon" id="hiddenMaHoaDon">
        <input type="hidden" name="trangThaiDonHang" id="hiddenTrangThaiDonHang">
    </form>

    <script th:inline="javascript">
        $(document).ready(function () {
            // Logic ki·ªÉm tra ng√†y th√°ng trong form t√¨m ki·∫øm
            $('#form-search').on('submit', function (e) {
                if($('#ngayTaoStart').val() && $('#ngayTaoEnd').val()) {
                    if( $('#ngayTaoEnd').val() < $('#ngayTaoStart').val()) {
                        Swal.fire({
                            title: "L·ªói",
                            text: `Ng√†y k·∫øt th√∫c ph·∫£i l·ªõn h∆°n ng√†y b·∫Øt ƒë·∫ßu`,
                            icon: "error",
                        })
                        return false
                    }
                }
                return true;
            })

            // Logic H·ªßy ƒë∆°n (S·ª≠ d·ª•ng form ·∫©n)
            $('.cancel-btn').on('click', function (e) {
                e.stopPropagation();
                var maHoaDon = $(this).data('mahoadon');
                var nextStatus = $(this).data('next-status'); // 'HUY'

                Swal.fire({
                    title: "X√°c nh·∫≠n?",
                    text: `B·∫°n ch·∫Øc ch·∫Øn mu·ªën **h·ªßy** ƒë∆°n n√†y, thao t√°c n√†y kh√¥ng th·ªÉ ho√†n l·∫°i!`,
                    icon: "warning",
                    showCancelButton: true,
                    cancelButtonText: 'H·ªßy',
                    confirmButtonText: 'X√°c nh·∫≠n h·ªßy',
                    reverseButtons: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        // ƒê·∫∑t gi√° tr·ªã v√†o form ·∫©n v√† g·ª≠i
                        $('#hiddenMaHoaDon').val(maHoaDon);
                        $('#hiddenTrangThaiDonHang').val(nextStatus);
                        $('#updateStatusForm').submit();
                    }
                });
            })

            // Logic Chuy·ªÉn tr·∫°ng th√°i ti·∫øp theo (S·ª≠ d·ª•ng form ·∫©n)
            $('.btn-update-status').on('click', function (e) {
                e.stopPropagation();
                var maHoaDon = $(this).data('mahoadon');
                var currentStatus = $(this).data('current-status');

                var nextStatus;
                var statusMessage;
                switch (currentStatus) {
                    case "CHO_XAC_NHAN":
                        nextStatus = "CHO_LAY_HANG";
                        statusMessage = "Ch·ªù l·∫•y h√†ng";
                        break;
                    case "CHO_LAY_HANG":
                        nextStatus = "CHO_GIAO_HANG";
                        statusMessage = "Ch·ªù giao h√†ng";
                        break;
                    case "CHO_GIAO_HANG":
                        nextStatus = "HOAN_THANH";
                        statusMessage = "Ho√†n th√†nh";
                        break;
                    default:
                        return;
                }

                Swal.fire({
                    title: "X√°c nh·∫≠n?",
                    text: `X√°c nh·∫≠n chuy·ªÉn sang tr·∫°ng th√°i **${statusMessage}**`,
                    icon: "info",
                    showCancelButton: true,
                    cancelButtonText: 'H·ªßy',
                    confirmButtonText: 'X√°c nh·∫≠n',
                    reverseButtons: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        // ƒê·∫∑t gi√° tr·ªã v√†o form ·∫©n v√† g·ª≠i
                        $('#hiddenMaHoaDon').val(maHoaDon);
                        $('#hiddenTrangThaiDonHang').val(nextStatus);
                        $('#updateStatusForm').submit();
                    }
                });
            })

            // Hover tooltip cho c√°c icon
            $('[data-toggle="tooltip"]').tooltip();
        })

        // H√ÄM EXPORT EXCEL
        function exportToExcel() {
            var page = document.getElementById("pageValue").value;
            // D√πng sortValue
            var sort = document.getElementById("sortValue").value;
            var ngayTaoStart = document.getElementById("ngayTaoStartValue").value;
            var ngayTaoEnd = document.getElementById("ngayTaoEndValue").value;
            var maDinhDanh = document.getElementById("maDinhDanhValue").value;
            var trangThai = document.getElementById("trangThaiValue").value;
            var loaiDon = document.getElementById("loaiDonValue").value;
            var hoVaTen = document.getElementById("hoVaTenValue").value;
            var soDienThoai = document.getElementById("soDienThoaiValue").value;


            Swal.fire({
                title: "X√°c nh·∫≠n ?",
                text: "X√°c nh·∫≠n xu·∫•t file Excel theo c√°c ƒëi·ªÅu ki·ªán l·ªçc hi·ªán t·∫°i?",
                icon: "question",
                showCancelButton: true,
                cancelButtonText: 'H·ªßy',
                confirmButtonText: 'X√°c nh·∫≠n Export',
                reverseButtons: true
            })
                .then((result) => {
                    if (result.isConfirmed) {
                        // N·ªëi T·∫§T C·∫¢ tham s·ªë v√†o URL Export
                        var exportUrl = `/admin/export-bill?page=${page}&sort=${sort}&ngayTaoStart=${ngayTaoStart}&ngayTaoEnd=${ngayTaoEnd}&maDinhDanh=${maDinhDanh}&trangThai=${trangThai}&loaiDon=${loaiDon}&hoVaTen=${hoVaTen}&soDienThoai=${soDienThoai}`;
                        window.location.href = exportUrl;
                    }
                });
        }
    </script>
</div>
</body>
</html>